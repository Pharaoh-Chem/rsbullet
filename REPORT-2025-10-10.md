# Daily Report 2025-10-10

## Summary

- Restored the `PhysicsClient` struct and command status handling after the earlier patch conflict, bringing `rsbullet-core/src/client.rs` back to a compiling state.
- Reviewed the current PyBullet C API surface (`pybullet.c`) and reconciled it against our Rust facade to prepare the next implementation sprint.
- Identified the subset of world authoring and dynamics APIs that should be tackled next and annotated their priority in the inventory below.

## Build & Tests

- `cargo check` (pass)

## Current Rust Coverage Snapshot

- Connection/session: `connect`, `disconnectPhysicsServer`, `isConnected`.
- Simulation control: `stepSimulation`, `performCollisionDetection`, `resetSimulation`, `setGravity`, `setTimeStep`, `setRealTimeSimulation`.
- World loading: `setAdditionalSearchPath`, `loadURDF`, `loadSDF`, `loadMJCF`.
- Body/joint data: `getNumBodies`, `getBodyUniqueId`, `getBodyInfo`, `getNumJoints`, `getJointInfo`, `getJointState`, `getBasePositionAndOrientation`, `getBaseVelocity`.

## API Inventory (reference: `rsbullet-sys/bullet3/examples/pybullet/pybullet.c`)

Status legend: **Implemented** (available in `PhysicsClient`), **Planned** (target for upcoming world authoring & dynamics work), **Pending** (not yet scheduled), **Optional** (feature-flag or legacy, implement on demand).

### Connection & Session

| API | Status | Notes |
| --- | --- | --- |
| connect | **Implemented** | `PhysicsClient::connect` covers all modes in scope |
| disconnect | **Implemented** | `PhysicsClient::disconnectPhysicsServer` + `Drop` |
| getConnectionInfo | **Implemented** | Requires client/server introspection |
| isConnected | **Implemented** | Uses `b3CanSubmitCommand` |

### Simulation Parameters

| API | Status | Notes |
| --- | --- | --- |
| resetSimulation | **Implemented** | Core reset command |
| stepSimulation | **Implemented** | Core stepping command |
| performCollisionDetection | **Implemented** | Extra collision command |
| setGravity | **Implemented** | Physics param command |
| setTimeStep | **Implemented** | Physics param command |
| setDefaultContactERP | **Implemented** | Physics param command |
| setRealTimeSimulation | **Implemented** | Physics param command |
| setPhysicsEngineParameter | **Implemented** | Bulk physics-param configuration |
| getPhysicsEngineParameters | **Implemented** | Query mirror of above |
| setInternalSimFlags | **Implemented** | Expert-only flagging |

### World Authoring & Persistence

| API | Status | Notes |
| --- | --- | --- |
| loadURDF | **Implemented** | Supports position/orientation/options |
| loadSDF | **Implemented** | Returns body list |
| loadSoftBody | Optional | Requires soft-body build support |
| createSoftBodyAnchor | Optional | Soft-body specific |
| loadBullet | **Implemented** | World snapshot load |
| saveBullet | **Implemented** | World snapshot save |
| restoreState | **Implemented** | In-memory state restore |
| saveState | **Implemented** | In-memory state save |
| removeState | **Implemented** | Pair with saveState |
| loadMJCF | **Implemented** | Returns body list |
| saveWorld | **Implemented** | Script export helper |
| setAdditionalSearchPath | **Implemented** | Search path registry |
| vhacd | Optional | Requires VHACD build flag |

### Asset Creation & Mutation

| API | Status | Notes |
| --- | --- | --- |
| createCollisionShape | **Implemented** | Supports primitive/mesh geometry |
| createCollisionShapeArray | **Implemented** | Compound shape builder |
| removeCollisionShape | **Implemented** | Clean-up helper |
| getMeshData | Pending | Mesh inspection |
| getTetraMeshData | Pending | Soft-body mesh |
| resetMeshData | Optional | Deformable specific |
| createVisualShape | **Implemented** | Visual geometry authoring |
| createVisualShapeArray | **Implemented** | Compound visual builder |
| createMultiBody | **Implemented** | Procedural multibody build |
| createConstraint | **Implemented** | Constraint authoring |
| changeConstraint | **Implemented** | Constraint mutation |
| removeConstraint | **Implemented** | Constraint teardown |
| enableJointForceTorqueSensor | **Implemented** | Sensor toggle |
| removeBody | **Implemented** | Body teardown |
| getNumConstraints | **Implemented** | Enumeration helper |
| getConstraintInfo | **Implemented** | Constraint query |
| getConstraintState | **Implemented** | Constraint forces |
| getConstraintUniqueId | **Implemented** | Constraint enumeration |
| changeVisualShape | **Implemented** | Visual mutation |
| resetVisualShapeData | Pending | Legacy alias |
| loadTexture | **Implemented** | Visual assets |
| changeTexture | **Implemented** | Visual assets |

### Bodies, Joints & Base State

| API | Status | Notes |
| --- | --- | --- |
| getNumBodies | **Implemented** | Enumeration helper |
| getBodyUniqueId | **Implemented** | Enumeration helper |
| getBodyInfo | **Implemented** | Names cached |
| computeDofCount | **Implemented** | Useful with dynamics |
| syncBodyInfo | **Implemented** | Multi-client support |
| syncUserData | **Implemented** | Multi-client support |
| addUserData | **Implemented** | User data authoring |
| getUserData | **Implemented** | User data query |
| removeUserData | **Implemented** | User data cleanup |
| getUserDataId | **Implemented** | User data query |
| getNumUserData | **Implemented** | User data query |
| getUserDataInfo | **Implemented** | User data query |
| getBasePositionAndOrientation | **Implemented** | Uses actual state request |
| getAABB | **Implemented** | Contact bounds |
| resetBasePositionAndOrientation | **Implemented** | World authoring priority |
| unsupportedChangeScaling | Optional | Rudimentary scaling |
| getBaseVelocity | **Implemented** | Uses actual state request |
| resetBaseVelocity | **Implemented** | Dynamics priority |
| getNumJoints | **Implemented** | Joint enumeration |
| getJointInfo | **Implemented** | Joint metadata |
| getJointState | **Implemented** | Single joint sensor |
| getJointStates | **Implemented** | Batch sensor support |
| getJointStateMultiDof | **Implemented** | Multi-DoF sensor |
| getJointStatesMultiDof | **Implemented** | Multi-DoF batch |
| getLinkState | **Implemented** | Forward kinematics |
| getLinkStates | **Implemented** | Batch link state |
| resetJointState | **Implemented** | World authoring priority |
| resetJointStateMultiDof | **Implemented** | Multi-DoF reset |
| resetJointStatesMultiDof | **Implemented** | Multi-DoF batch reset |

### Dynamics & Control

| API | Status | Notes |
| --- | --- | --- |
| changeDynamics | **Implemented** | Mutation wrapper |
| getDynamicsInfo | **Implemented** | Mirrors Bullet query |
| setJointMotorControl | Optional | Legacy single-call (deprecated) |
| setJointMotorControl2 | **Implemented** | Primary motor control path |
| setJointMotorControlMultiDof | **Implemented** | Multi-DoF control |
| setJointMotorControlMultiDofArray | **Implemented** | Multi-DoF batch control |
| setJointMotorControlArray | **Implemented** | Batch joint control |
| applyExternalForce | **Implemented** | Core dynamics action |
| applyExternalTorque | **Implemented** | Core dynamics action |
| calculateInverseDynamics | **Implemented** | Advanced dynamics |
| calculateJacobian | **Implemented** | Advanced dynamics |
| calculateMassMatrix | **Implemented** | Advanced dynamics |
| calculateInverseKinematics | **Implemented** | Depends on jacobians |
| calculateInverseKinematics2 | **Implemented** | Multi-end-effector variant |

### Collision Queries & Contact Data

| API | Status | Notes |
| --- | --- | --- |
| getContactPoints | **Implemented** | Returns per-contact data |
| getClosestPoints | **Implemented** | Distance queries |
| getOverlappingObjects | **Implemented** | AABB queries |
| setCollisionFilterPair | **Implemented** | Collision filtering |
| setCollisionFilterGroupMask | **Implemented** | Collision filtering |
| rayTest | **Implemented** | Single raycast |
| rayTestBatch | **Implemented** | Batch raycasts |

### Rendering, Debug & Visualization

| API | Status | Notes |
| --- | --- | --- |
| renderImage | Pending | Obsolete; low priority |
| getCameraImage | Pending | High effort (buffers) |
| isNumpyEnabled | Pending | Simple flag query |
| computeViewMatrix | Pending | Math helper |
| computeViewMatrixFromYawPitchRoll | Pending | Math helper |
| computeProjectionMatrix | Pending | Math helper |
| computeProjectionMatrixFOV | Pending | Math helper |
| addUserDebugLine | Pending | Debug draw |
| addUserDebugPoints | Pending | Debug draw |
| addUserDebugText | Pending | Debug draw |
| addUserDebugParameter | Pending | GUI slider/button |
| readUserDebugParameter | Pending | GUI feedback |
| removeUserDebugItem | Pending | Debug cleanup |
| removeAllUserDebugItems | Pending | Debug cleanup |
| removeAllUserParameters | Pending | Debug cleanup |
| setDebugObjectColor | Pending | Debug override |
| getDebugVisualizerCamera | Pending | Visualizer query |
| configureDebugVisualizer | Pending | Visualizer toggle |
| resetDebugVisualizerCamera | Pending | Visualizer camera |
| getVisualShapeData | Pending | Visual query |
| getCollisionShapeData | Pending | Collision query |

### Math & Transform Utilities

| API | Status | Notes |
| --- | --- | --- |
| getQuaternionFromEuler | Pending | Utility |
| getEulerFromQuaternion | Pending | Utility |
| multiplyTransforms | Pending | Utility |
| invertTransform | Pending | Utility |
| getMatrixFromQuaternion | Pending | Utility |
| getQuaternionSlerp | Pending | Utility |
| getQuaternionFromAxisAngle | Pending | Utility |
| getAxisAngleFromQuaternion | Pending | Utility |
| getDifferenceQuaternion | Pending | Utility |
| getAxisDifferenceQuaternion | Pending | Utility |
| calculateVelocityQuaternion | Pending | Utility |
| rotateVector | Pending | Utility |

### VR, Input, Logging, Plugins & Misc

| API | Status | Notes |
| --- | --- | --- |
| getVREvents | Pending | VR input |
| setVRCameraState | Pending | VR camera |
| getKeyboardEvents | Pending | Input polling |
| getMouseEvents | Pending | Input polling |
| startStateLogging | Pending | Logging |
| stopStateLogging | Pending | Logging |
| loadPlugin | Pending | Plugin system |
| unloadPlugin | Pending | Plugin system |
| executePluginCommand | Pending | Plugin system |
| submitProfileTiming | Pending | Profiling |
| setTimeOut | Pending | Client timeout |
| getAPIVersion | Pending | Static constant |

## Near-Term Focus

1. Tackle the Asset Creation & Mutation APIs still pending (collision/visual shapes, multibody construction).
2. Add regression tests exercising the new dynamics/motor control and collision query wrappers.
3. Plan the Rendering/Debug utility work once math helpers are in place.
